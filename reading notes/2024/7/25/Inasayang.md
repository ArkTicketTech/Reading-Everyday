# Learning OpenTelemetry Setting Up and Operating a Modern Observability System pp. 111-118

### Resource management

本地采集器有两个主要目的：允许应用程序快速撤离它产生的遥测数据，以及收集主机指标。除这两项任务以外的任何额外处理都可以交给采集器池来处理。

## Pipeline Operations

任何遥测管道的第一步应该是删除绝对不需要的内容。

采样与过滤的不同之处在于，它的目标是减少管道必须处理的总体数据量。与过滤一样，采样应尽早在管道中进行，以避免浪费时间处理不会被导出的遥测数据。

通常，可以采用三种采样策略：基于头部的采样、基于尾部的采样和基于存储的采样。

- Head-based sampling
  - 在跟踪开始时做出采样决策——通常使用 1/10 或 1/100 这样的因子。不建议在 OpenTelemetry 中使用基于头部的采样，因为这样可能会错过重要的跟踪数据。
- Tail-based sampling
  - 等到一个跟踪完成后再做采样决策。这种策略允许保留特定子集的跟踪，例如那些包含错误的跟踪或对应于特定用户的跟踪。
- Storage-based sampling
  - 在分析工具中实现，而不是在遥测管道中
  - 系统可以在一个支持实时查询和调试工作流程的系统中存储100%的遥测数据一周，以便快速处理问题并发现系统故障的根本原因。一周后，大部分遥测数据被删除，只保留一个小的统计样本用于历史目的。虽然这种方法不会减少将遥测数据发送到分析工具的成本，但它在功能和存储成本方面提供了最佳的解决方案。

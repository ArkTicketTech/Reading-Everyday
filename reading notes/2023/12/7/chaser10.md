#### http是什么
http是两台计算机之间传输文本、图片、视频音频等超文本的约定和规范
规范了控制和错误处理方式还有报文内容格式
请求头，和响应头是客户端与服务端之间在传输过程中对所传输数据的参数描述

#### 状态码有哪些
1. 1xx 中间状态，用的比较少
2. 2xx 返回成功状态
	1. 200 OK 成功返回带body的响应头
	2. 204 No Content 返回不带body的响应头
	3. 206 Partial Content 分块下载
3. 3xx 重定向
	1. 301 Move Permanently 永久重定向 请求的资源已不在 需要改用新的url再次访问
	2. 302 Found 资源还在但是需要使用新的链接访问请求资源
		1. 301 302 都会在响应头使用字段Location 来指定后续跳转的URL
	3. 304 Not Modified 资源没有更改 重定向至本地缓存的文件
4.  4xx 请求错误
	1. 400 Bad request 笼统的请求错误
	2. 403 Forbidden 请求的资源没有权限访问
	3. 404 请求的资源不存在或未找到
5. 5xx 服务端错误
	1. 500 Internal Server Error 笼统的错误
	2. 501 Not Implemented 请求的错误暂时还不支持
	3. 502 Bad gateway 服务器作为网关时自身没有错误访问后端服务器时出错
		1. 网关是一个网络通向其他网络的IP地址
	4. 503 Service Unavailable 服务器繁忙 暂时无法响应

#### http的常见字段是什么
[(71条消息) HTTP 请求头与响应头详解_http请求头和响应头_杏子_1024的博客-CSDN博客](https://blog.csdn.net/weixin_44135121/article/details/89226912)
1. host 指定访问域名
2. content-length 服务器返回数据时 回应的数据长度
3. connection 要求服务器使用tcp长连接 以便其他请求服用
4. content-type 告诉客户端返回的数据是什么类型
5. accept 告诉服务端浏览器能接受哪些类型的数据格式
6. content-encoding 告诉客户端本次返回的数据采用了什么压缩格式
7. accept-encoding 告诉服务端自己能接收哪些格式的压缩格式

#### GET与POST的区别
get是从服务器获取资源 是只读的 安全且幂等
post是提交数据至服务器 因为要创建或修改资源 所以是不安全不幂等的
安全是指会不会修改服务器数据  幂等是指 执行多少次获得的数据都一样

#### http的特点
##### 优点
1. 简单 报文格式由header+body组成 而header由键值对组成 易于理解
2. 易于扩展 http协议每个组成部分都没有固定死（状态码  请求方法 ）  可以由开发人员自定义以及扩展
3. 跨平台  
##### 双刃剑
1. 无状态 服务器不保存http的状态 能减轻服务器的负担 但处理有关联性的操作会比较困难
2. 明文传输 易于读懂 但不安全
##### 缺点
不安全
#### 性能
http是基于tcp/IP的 请求-应答通信方式 每次连接需要建立连接
所以在http1.1中提出了长连接  
	所谓长连接，指在一个TCP连接上可以连续发送多个数据包，在TCP连接保持期间，如果没有数据包发送，需要双方发检测包以维持此连接，一般需要自己做在线维持。   短连接是指通信双方有数据交互时，就建立一个TCP连接，数据发送完成后，则断开此TCP连接，一般银行都使用短连接。
	短连接：连接->数据传输->断开连接
	长连接：连接->数据传输->保持连接(心跳)->保持连接->数据传输->断开
因为有了长连接，管道网络传输成为了可能，即第一个请求不用等待返回就可以发送第二个请求
#### http优化
##### 避免http请求
使用缓存将请求url以及响应内容以键值对的形式缓存到本地 并且包含一个服务器估算的过期时间  如果下次请求发现过期了 则在发送请求时在etag头部发送上一次响应头部的摘要 然后服务器对比这个摘要查看是否更改  如果没有更改则发送304响应
##### 减少http请求
1. 合并请求 将对多个文件的请求合并成一个大的请求
2. 延迟请求 只请求当前用户能看到的页面
##### 减少传输量
压缩

#### https
http是明文传输的，所以有以下三点风险
1. 窃听风险
2. 篡改风险
3. 冒充风险
https 则通过以下三方面解决
1. 加密通信
2. 摘要算法校验
3. 身份证书
##### 对称加密
加密 解密都用同一个私钥
##### 非对称加密
公钥加密 私钥解密 私钥签名 公钥验签
##### 摘要算法
使用哈希算法计算信息的哈希值
##### 数字签名
私钥将摘要加密
##### ssl/tls握手流程
1. client hello
	1. 支持的tls版本
	2. 生成一个随机值用于后续的通信密钥生成
	3. 支持的密码套件
2. server hello
	1. 确认支持的tls版本 如果客户端不支持关闭连接
	2. 生成随机值
	3. 选择的密码套件
	4. 服务器的数字证书
3. client key change
	1. 验证数字证书
		1. 通过相同哈希算法计算证书中服务器信息的哈希值得到H1
		2. 通过ca机构的公钥解密数字签名H2
		3. 比较H1与H2
	2. 生成一个随机值并用服务器公钥加密并发送给服务器
	3. 服务器用私钥解密这个随机值  双方通过三个随机值计算出通信密钥
	4. 客户端发送**Change Cipher Spec**告诉服务器要通过会话密钥进行通信
	5. 将之前发送消息做摘要之后用会话密钥加密发送 验证密钥是否可用以及是否被篡改
4. 服务器同样将发送消息做摘要后发送

#### http2
[HTTP2的特性解析 (qq.com)](https://mp.weixin.qq.com/s?__biz=MzU2MjAzNTQ1Mw==&mid=2247485318&idx=1&sn=485203c0357800ef1da363e3fdcf6346&chksm=fc6ee814cb1961023ddccfc313fecdbe6bdb1bae55517c6f97dcd03c2c1ff242081605f72a82&scene=27)
[(71条消息) 一文理清Http2.0_http2.0协议_Darren i的博客-CSDN博客](https://blog.csdn.net/weixin_43966635/article/details/117870300?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-1-117870300-blog-103397056.235^v38^pc_relevant_sort_base1&spm=1001.2101.3001.4242.2&utm_relevant_index=4)
[(71条消息) http/2.0“多路复用”实现原理 //转载_xosg的博客-CSDN博客](https://blog.csdn.net/zipack/article/details/103397056)
1. 头部压缩 hpack 维护静态表以及动态表使用序号代替常用的头部字符串
2. 二进制分帧  最小传输单位为帧 使用流进行传输 流是一个虚拟的概念 每个帧都维护了一个流id 接受端收到后将相同id的帧合并得到一个完整的请求   不同流的帧可以乱序发送从而实现并行 客户端的请求流id是奇数  服务器流id是偶数  一个域名的请求复用一个tcp连接  这可能导致**一个请求的包丢了 导致所有包需要重传** 
3. 服务器推送  服务器在上一个流发送`PUSH_PROMISE` 帧传输 HTTP 头部，并通过帧中的 `Promised Stream ID` 字段告知客户端接下来会在哪个偶数流发送资源   这个有个好处就是将客户端可能要请求的资源提前发送 从而减少延迟
缺点
基于tcp  tcp要确保收到的包是完整且连续的，当前一个字节没有到达之前后面到达的字节只能放在内核缓冲区中  多个请求又是复用一个tcp连接的 导致请求堵塞
用四元组标记一个连接当其中一个数据改变就要重新建立连接

#### http3
主要有三点改进
1. 将tls信息与连接信息一起发送  减少tls握手所要的时间
2. 将连接分配连接id
3. 某个流发生丢包只阻塞等待这一个流不会阻塞其他流

##### 长轮询
轮询就是客户端不断给服务端发送消息询问客户端是否有数据可用 没有则返回空消息
长轮询就客户端请求过来 如果暂时没有消息可用了  将请求挂起 直到超时之前如果有消息可用 之间将消息发送给客户端

#### websocket
websocket协议是全双工的  http1.1是半双工的